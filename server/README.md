# Room Tracking (server)

Server module for room tracking, built using NodeJS + Express

## Requirements

- NodeJS v12 (or latest LTS version, check [here](https://nodejs.org/en/about/releases/))
- MySQL (tested with version 5.7)

## Setup & Run

1. Run `npm install` to fetch all required packages
2. Set the database connection using `.env`. An example has been provided in `.env.example`. NOTE: You can also set the variables from the Environment Variable of your OS.
3. Make sure you have run the migrations at the `sql` folder of this project.
4. Run `npm run dev`. This will run the server using a dev runtime that is designed to automatically restart the server whenever a change has been detected.
5. For debugging with external tools (e.g. Visual Studio Code), run `npm run debug`. This will run the server similar to `npm run dev`, with JS inspector that supports various V8 debugging tools (breakpoints, watchers, etc.). 
  1. For Visual Studio Code, follow the following [link](https://stackoverflow.com/a/54231359/2935556) for example on how to setup your env.
6. For production env, run `npm run start`.

## Project Structure

1. `app.js` is the main entry point of the app.
2. `zones` folder contains the main modules:
  1. `dao.js` (Data Access Object) contains the database queries (M in the MVC structure)
  2. `routes.js` contains the routes (C in MVC structure)
  3. `utils.js` contains utility functions
  4. `validator.js` contains validation functions to check received request from the client.
3. `logs` contains logs generated by the server.
4. `config` contains common functions shared across the app.
5. `public` contains static files served by the app.
  1. All images of the zone is uploaded as a file and stored at `public/images/uploads`.
6. `utils` contains various utility functions.
7. `bin` contains small execution script used by `Express.js`

## Additional References

- [Promise in JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)
- [Bluebird.js](http://bluebirdjs.com/docs/getting-started.html)
- [node-mysql2](https://github.com/sidorares/node-mysql2/tree/master/documentation)
- [Express.js](https://expressjs.com/)